<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Snake â€” Dark Mode (Canvas)</title>
  <style>
    :root { --bg: #0b0f14; --panel: #0f141b; --muted: #7b8794; --text: #e6edf3; --accent: #4ade80; --accent-2: #60a5fa; --danger: #f87171; --grid: #15202b; --shadow: #00000055; }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body { margin: 0; overflow: hidden; background: radial-gradient(1200px 800px at 70% -200px, #10151d 0%, var(--bg) 60%) fixed; color: #e6edf3; font: 16px/1.4 system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji"; display: grid; place-items: center; }
    .shell { width: 96vw; max-width: 100%; margin: 16px auto; }
    .card { background: linear-gradient(180deg, #0f141b 0%, #0c1117 100%); border: 1px solid #1f2937; border-radius: 18px; box-shadow: 0 10px 30px var(--shadow), inset 0 1px 0 #1a2230; padding: 14px; height: calc(100vh - 24px); display: flex; flex-direction: column; }
    header { display: flex; align-items: center; justify-content: space-between; gap: 12px; margin-bottom: 12px; flex: 0 0 auto; padding-left: calc(220px + 14px); }
    h1 { font-size: 18px; margin: 0; letter-spacing: 0.5px; color: #dbeafe; display: flex; align-items: center; gap: 10px; }
    h1 .dot { width: 10px; height: 10px; border-radius: 50%; background: var(--accent); box-shadow: 0 0 8px var(--accent); display: inline-block; }
    .stats { display: flex; gap: 12px; align-items: center; flex-wrap: wrap; }
    .chip { background: #0b1117; border: 1px solid #1f2937; padding: 6px 10px; border-radius: 999px; font-size: 13px; color: #7b8794; }
    .chip strong { color: #e6edf3; }
    .play { display: grid; grid-template-columns: 220px 1fr; gap: 14px; align-items: stretch; min-height: 0; }
    .legend { background: #0b1117; border: 1px solid #1f2937; border-radius: 14px; padding: 12px; color: #cbd5e1; display: flex; flex-direction: column; overflow: auto; max-height: 100%; }
    .legend-title { font-weight: 700; margin: 0 0 8px 0; font-size: 14px; letter-spacing: .3px; color: #dbeafe; }
    .legend-item { display: grid; grid-template-columns: 36px 1fr; grid-template-rows: auto auto; gap: 6px 10px; padding: 8px 6px; border-radius: 10px; align-items: center; }
    .legend-item canvas { width: 30px; height: 30px; border-radius: 8px; border: 1px solid #1f2937; background: #0c1219; }
    .legend-item .name { font-weight: 600; color: #e5e7eb; }
    .legend-item .desc { font-size: 12px; color: #94a3b8; grid-column: 1 / -1; }
    .controls { margin-top: 10px; padding-top: 10px; border-top: 1px dashed #1f2937; }
    .controls .desc { font-size: 12px; color: #94a3b8; }
    .control-row { display: grid; grid-template-columns: 1fr; gap: 4px; margin: 8px 0; }
    .kbdbar { display: inline-flex; gap: 4px; flex-wrap: wrap; }
    kbd { background: #0c1117; border: 1px solid #1f2937; border-radius: 6px; padding: 2px 6px; font-size: 12px; color: #cbd5e1; }
    .board-wrap { position: relative; flex: 1 1 auto; display: grid; place-items: center; min-height: 0; }
    canvas#board { display: block; background: radial-gradient(800px 600px at 50% 30%, #0f1621 0%, #0b1117 35%, #0a0f14 100%); border-radius: 14px; border: 1px solid #1f2937; }
    .overlay { position: absolute; inset: 0; display: grid; place-items: center; pointer-events: none; border-radius: 14px; }
    .overlay .panel { pointer-events: auto; background: rgba(8,11,15,0.82); backdrop-filter: blur(8px); border: 1px solid #1f2937; border-radius: 16px; padding: 18px 20px; text-align: center; max-width: 85%; box-shadow: 0 10px 30px var(--shadow); }
    .title { font-weight: 700; letter-spacing: 0.4px; margin-bottom: 6px; }
    .subtitle { color: #7b8794; font-size: 14px; margin-bottom: 12px; }
    .btns { display: flex; gap: 8px; justify-content: center; flex-wrap: wrap; }
    button { all: unset; padding: 10px 14px; background: #0c1219; border: 1px solid #1f2937; border-radius: 10px; cursor: pointer; color: #e6edf3; font-weight: 600; box-shadow: 0 4px 16px var(--shadow), inset 0 1px 0 #172033; transition: transform .06s ease, box-shadow .2s ease, background .2s ease; }
    button:hover { transform: translateY(-1px); }
    button:active { transform: translateY(1px); }
    .primary { background: linear-gradient(180deg, #1a2a1f, #0d1a12); border-color: #1f3b2a; }
    .danger { background: linear-gradient(180deg, #2a1a1a, #1a0d0d); border-color: #3b1f1f; }
    @media (max-width: 780px) { .play { grid-template-columns: 1fr; } .shell { width: 94vw; } header { padding-left: 0; } }
  </style>
</head>
<body>
  <div class="shell">
    <div class="card">
      <header>
        <h1><span class="dot"></span> Snake</h1>
        <div class="stats">
          <div class="chip">Score: <strong id="score">0</strong></div>
          <div class="chip">High: <strong id="high">0</strong></div>
          <div class="chip">Speed: <strong id="speed">1.0x</strong></div>
          <div class="chip">Slow: <strong id="slow">0.0s</strong></div>
          <div class="chip">HP: <strong id="hp">0</strong></div>
        </div>
      </header>
      <div class="play">
        <aside class="legend">
          <div class="legend-title">Legend</div>
          <div class="legend-item">
            <canvas id="icon-apple" width="36" height="36"></canvas>
            <div class="name">Apple</div>
            <div class="desc">+1 score, grow by 1, slightly increases base speed.</div>
          </div>
          <div class="legend-item">
            <canvas id="icon-banana" width="36" height="36"></canvas>
            <div class="name">Banana</div>
            <div class="desc">Temporarily slows speed; duration scales with high score (capped).</div>
          </div>
          <div class="legend-item">
            <canvas id="icon-orange" width="36" height="36"></canvas>
            <div class="name">Orange</div>
            <div class="desc">+1 hitpoint up to a small maximum.</div>
          </div>
          <div class="legend-item">
            <canvas id="icon-pear" width="36" height="36"></canvas>
            <div class="name">Pear</div>
            <div class="desc">Spawns in pairs; eating one teleports you to the other.</div>
          </div>
          <div class="legend-item">
            <canvas id="icon-cherry" width="36" height="36"></canvas>
            <div class="name">Cherry</div>
            <div class="desc">Spawns on edges; when wrap is off: next move only, hit a wall to wrap once; otherwise just +1 score.</div>
          </div>
          <div class="legend-item">
            <canvas id="icon-mouse" width="36" height="36"></canvas>
            <div class="name">Mouse</div>
            <div class="desc">Moves in 8 directions, avoids the snake, eats fruits; +5 if eaten.</div>
          </div>
          <div class="controls">
            <div class="legend-title">Controls</div>
            <div class="control-row">
              <div class="kbdbar"><kbd>W</kbd><kbd>A</kbd><kbd>S</kbd><kbd>D</kbd></div>
              <div class="desc">Move the snake. You cannot reverse into yourself.</div>
            </div>
            <div class="control-row">
              <div class="kbdbar"><kbd>P</kbd></div>
              <div class="desc">Pause / resume.</div>
            </div>
            <div class="control-row">
              <div class="kbdbar"><kbd>R</kbd></div>
              <div class="desc">Restart from the current start state.</div>
            </div>
            <div class="control-row">
              <div class="kbdbar"><kbd>T</kbd></div>
              <div class="desc">Toggle wrap-around walls.</div>
            </div>
          </div>
        </aside>
        <div class="board-wrap">
          <canvas id="board" width="640" height="640" aria-label="Snake board" role="img"></canvas>
        </div>
      </div>
    </div>
  </div>
  <script type="module" src="./snake.js"></script>
</body>
</html>
